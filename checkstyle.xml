<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
    "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
    "https://checkstyle.org/dtds/configuration_1_3.dtd">

<!--
    Checkstyle configuration for User Management Application
    Based on Google Java Style Guide with customizations
-->

<module name="Checker">
    <property name="charset" value="UTF-8"/>
    <property name="severity" value="warning"/>
    <property name="fileExtensions" value="java, properties, xml"/>

    <!-- Excludes all 'module-info.java' files -->
    <module name="BeforeExecutionExclusionFileFilter">
        <property name="fileNamePattern" value="module\-info\.java$"/>
    </module>

    <!-- File length -->
    <module name="FileLength">
        <property name="max" value="2000"/>
    </module>

    <!-- Line length -->
    <module name="LineLength">
        <property name="fileExtensions" value="java"/>
        <property name="max" value="120"/>
        <property name="ignorePattern" value="^package.*|^import.*|a href|href|http://|https://|ftp://"/>
    </module>

    <!-- Whitespace -->
    <module name="FileTabCharacter">
        <property name="eachLine" value="true"/>
    </module>

    <!-- Trailing whitespace -->
    <module name="RegexpSingleline">
        <property name="format" value="\s+$"/>
        <property name="message" value="Line has trailing spaces."/>
    </module>

    <!-- One top-level class per file -->
    <module name="OneTopLevelClass"/>

    <!-- Package declaration -->
    <module name="PackageDeclaration"/>

    <!-- Imports -->
    <module name="AvoidStarImport"/>
    <module name="IllegalImport"/>
    <module name="RedundantImport"/>
    <module name="UnusedImports">
        <property name="processJavadoc" value="false"/>
    </module>

    <!-- Import order -->
    <module name="CustomImportOrder">
        <property name="sortImportsInGroupAlphabetically" value="true"/>
        <property name="separateLineBetweenGroups" value="true"/>
        <property name="customImportOrderRules" value="STATIC###THIRD_PARTY_PACKAGE"/>
        <property name="tokens" value="IMPORT, STATIC_IMPORT, PACKAGE_DEF"/>
    </module>

    <!-- Class and interface declarations -->
    <module name="EmptyLineSeparator">
        <property name="tokens" value="PACKAGE_DEF, IMPORT, STATIC_IMPORT, CLASS_DEF, INTERFACE_DEF, ENUM_DEF, STATIC_INIT, INSTANCE_INIT, METHOD_DEF, CTOR_DEF, VARIABLE_DEF"/>
    </module>

    <!-- Naming conventions -->
    <module name="ConstantName"/>
    <module name="LocalFinalVariableName"/>
    <module name="LocalVariableName"/>
    <module name="MemberName"/>
    <module name="MethodName"/>
    <module name="PackageName"/>
    <module name="ParameterName"/>
    <module name="StaticVariableName"/>
    <module name="TypeName"/>

    <!-- Method and class length -->
    <module name="MethodLength">
        <property name="max" value="150"/>
    </module>
    <module name="ParameterNumber">
        <property name="max" value="7"/>
    </module>

    <!-- Whitespace -->
    <module name="EmptyForIteratorPad"/>
    <module name="GenericWhitespace"/>
    <module name="MethodParamPad"/>
    <module name="NoWhitespaceAfter"/>
    <module name="NoWhitespaceBefore"/>
    <module name="OperatorWrap"/>
    <module name="ParenPad"/>
    <module name="TypecastParenPad"/>
    <module name="WhitespaceAfter"/>
    <module name="WhitespaceAround"/>

    <!-- Modifier checks -->
    <module name="ModifierOrder"/>
    <module name="RedundantModifier"/>

    <!-- Blocks -->
    <module name="AvoidNestedBlocks"/>
    <module name="EmptyBlock"/>
    <module name="LeftCurly"/>
    <module name="NeedBraces"/>
    <module name="RightCurly"/>

    <!-- Common coding problems -->
    <module name="EmptyStatement"/>
    <module name="EqualsHashCode"/>
    <module name="HiddenField">
        <property name="ignoreConstructorParameter" value="true"/>
        <property name="ignoreSetter" value="true"/>
    </module>
    <module name="IllegalInstantiation"/>
    <module name="InnerAssignment"/>
    <module name="MagicNumber">
        <property name="ignoreNumbers" value="-1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608, 16777216, 33554432, 67108864, 134217728, 268435456, 536870912, 1073741824, 2147483648, 4294967296, 8589934592, 17179869184, 34359738368, 68719476736, 137438953472, 274877906944, 549755813888, 1099511627776, 2199023255552, 4398046511104, 8796093022208, 17592186044416, 35184372088832, 70368744177664, 140737488355328, 281474976710656, 562949953421312, 1125899906842624, 2251799813685248, 4503599627370496, 9007199254740992, 18014398509481984, 36028797018963968, 72057594037927936, 144115188075855872, 288230376151711744, 576460752303423488, 1152921504606846976, 2305843009213693952, 4611686018427387904, 9223372036854775808"/>
        <property name="ignoreHashCodeMethod" value="true"/>
        <property name="ignoreAnnotation" value="true"/>
        <property name="ignoreFieldDeclaration" value="true"/>
        <property name="ignoreAnnotationElementDefaults" value="true"/>
    </module>
    <module name="MissingSwitchDefault"/>
    <module name="MultipleVariableDeclarations"/>
    <module name="SimplifyBooleanExpression"/>
    <module name="SimplifyBooleanReturn"/>

    <!-- Class design -->
    <module name="DesignForExtension"/>
    <module name="FinalClass"/>
    <module name="HideUtilityClassConstructor"/>
    <module name="InterfaceIsType"/>
    <module name="VisibilityModifier">
        <property name="protectedAllowed" value="true"/>
    </module>

    <!-- Miscellaneous -->
    <module name="ArrayTypeStyle"/>
    <module name="FinalParameters"/>
    <module name="TodoComment"/>
    <module name="UpperEll"/>

    <!-- Annotations -->
    <module name="AnnotationLocation">
        <property name="id" value="AnnotationLocationMostCases"/>
        <property name="tokens" value="CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF, CTOR_DEF"/>
    </module>
    <module name="AnnotationLocation">
        <property name="id" value="AnnotationLocationVariables"/>
        <property name="tokens" value="VARIABLE_DEF"/>
        <property name="allowSamelineMultipleAnnotations" value="true"/>
    </module>

    <!-- Comments -->
    <module name="CommentsIndentation">
        <property name="tokens" value="SINGLE_LINE_COMMENT, BLOCK_COMMENT_BEGIN"/>
    </module>

    <!-- Javadoc comments -->
    <module name="AtclauseOrder">
        <property name="tagOrder" value="@param, @return, @throws, @deprecated"/>
        <property name="target" value="CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF, CTOR_DEF, VARIABLE_DEF"/>
    </module>
    <module name="JavadocMethod">
        <property name="scope" value="public"/>
        <property name="allowMissingParamTags" value="true"/>
        <property name="allowMissingReturnTag" value="true"/>
        <property name="allowedAnnotations" value="Override, Test"/>
        <property name="tokens" value="METHOD_DEF, CTOR_DEF, ANNOTATION_FIELD_DEF, COMPACT_CTOR_DEF"/>
    </module>
    <module name="JavadocType">
        <property name="scope" value="protected"/>
        <property name="tokens" value="CLASS_DEF, INTERFACE_DEF, ENUM_DEF, ANNOTATION_DEF, RECORD_DEF"/>
    </module>
    <module name="JavadocVariable">
        <property name="scope" value="protected"/>
        <property name="tokens" value="ENUM_CONSTANT_DEF, PARAMETER_DEF, ENUM_DEF, ANNOTATION_FIELD_DEF"/>
    </module>
    <module name="JavadocStyle">
        <property name="checkEmptyJavadoc" value="true"/>
    </module>
    <module name="MissingJavadocMethod">
        <property name="scope" value="public"/>
        <property name="minLineCount" value="2"/>
        <property name="allowedAnnotations" value="Override, Test"/>
        <property name="tokens" value="METHOD_DEF, CTOR_DEF, ANNOTATION_FIELD_DEF, COMPACT_CTOR_DEF"/>
    </module>
    <module name="NonEmptyAtclauseDescription"/>
    <module name="SingleLineJavadoc">
        <property name="ignoreInlineTags" value="false"/>
    </module>
    <module name="SummaryJavadoc">
        <property name="forbiddenSummaryFragments" value="^@return the *|^This method returns |^a [{]@code [a-zA-Z0-9]+[}]( is a )"/>
    </module>

    <!-- Spring Boot specific rules -->
    <module name="RegexpSinglelineJava">
        <property name="format" value="System\.out\.println"/>
        <property name="message" value="Use logger instead of System.out.println"/>
    </module>

    <!-- Custom rules for this project -->
    <module name="RegexpSinglelineJava">
        <property name="format" value="TODO|FIXME|XXX"/>
        <property name="message" value="TODO/FIXME/XXX found - consider addressing"/>
        <property name="ignoreCase" value="true"/>
    </module>

    <!-- Suppress warnings for generated code -->
    <module name="SuppressWarningsHolder"/>

</module>

